<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <title>Dashboard - Discord Bot Dashboard</title>
</head>
<body>
    <header>
        <nav>
            <div class="logo">ScytedTV Bot Network</div>
            <ul>
                <li><a href="#" class="active">Home</a></li>
                <li><a href="#" onclick="logout()">Logout</a></li>
            </ul>
        </nav>
    </header>
    <div class="container">
        <h1>Dashboard</h1>
        <div id="userInfo" class="user-info"></div>
    </div>
    <script src="scripts.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const storedUserId = localStorage.getItem("userId");
    
            // Redirect to login if user is not authenticated
            if (!storedUserId) {
                window.location.href = "../login";
            } else {
                // Fetch user data from Discord API
                fetchDiscordUserData(storedUserId)
                    .then(userData => {
                        // Display user info on the dashboard
                        displayUserInfo(userData);
                    })
                    .catch(error => {
                        console.error("Error fetching user data:", error);
                        // Handle error (e.g., redirect to login page)
                        window.location.href = "../login";
                    });
            }
        });
    
        function fetchDiscordUserData(userId) {
            // Implement your Discord API call to fetch user data using the user ID
            // Example URL: `https://discord.com/api/users/${userId}`
            // Return a Promise with the user data
            // ...
    
            // For now, a placeholder Promise is returned
            return Promise.resolve({
                id: userId,
                username: "SampleUser",
                avatar: "abc123"
            });
        }
    
        function displayUserInfo(userData) {
            const userInfoDiv = document.getElementById("userInfo");
    
            const profilePicture = document.createElement("img");
            profilePicture.src = `https://cdn.discordapp.com/avatars/${userData.id}/${userData.avatar}.png`;
            profilePicture.alt = "Profile Picture";
            profilePicture.classList.add("profile-picture");
    
            const usernameElement = document.createElement("h2");
            usernameElement.textContent = userData.username;
    
            userInfoDiv.appendChild(profilePicture);
            userInfoDiv.appendChild(usernameElement);
        }
    
        function logout() {
            // Clear localStorage
            localStorage.removeItem("userId");
    
            // Redirect to login page
            window.location.href = "../login";
        }
    </script>
</body>
</html>